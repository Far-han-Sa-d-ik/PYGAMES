<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.12.0/brython.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/brython/3.12.0/brython_stdlib.min.js"></script>
    <title>PYGAMES</title>
    <style>
        body { 
            background-color: #72C8FA; 
            margin: 0; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            font-family: sans-serif;
        }
        #turtle_canvas { 
            border: 5px solid #171717; 
            background-color: white;
            /* Keeps the box a fixed size */
            width: 600px;
            height: 600px;
        }
    </style>
</head>

<body onload="brython()">
    <div id="turtle_canvas"></div>

    <script type="text/python">
import turtle as t
import random as r

# Link the turtle to the box
t.set_panel("turtle_canvas")

score = 0
high_score = 0

def snap(val):
    return round(val / 20) * 20

def antgame():
    global score, high_score
    score = 0
    scr = t.Screen()
    scr.clear()
    scr.bgcolor("#FACA72")
    scr.tracer(0)

    h = t.Turtle('turtle')
    h.color("#ff2600")
    h.penup()
    h.direction = 'stop'
    
    f = t.Turtle('circle')
    f.penup()
    f.color("#F3D6D6")
    f.goto(0, 60)

    d = t.Turtle('circle')
    d.penup()
    d.color("#EDAB48")
    d.goto(0, -60)

    b = t.Turtle('circle')
    b.penup()
    b.color("#052304")
    b.goto(60, -60)

    p = t.Turtle()
    p.hideturtle()
    p.penup()
    p.goto(0, 260)

    def move():
        if h.direction == "up": h.sety(h.ycor()+20)
        if h.direction == "down": h.sety(h.ycor()-20)
        if h.direction == "left": h.setx(h.xcor()-20)
        if h.direction == "right": h.setx(h.xcor()+20)

    def ant_loop():
        global score, high_score
        move()
        if abs(h.xcor()) > 290 or abs(h.ycor()) > 290 or h.distance(b) < 20:
            if score > high_score: high_score = score
            drawmenu()
            return
        if h.distance(f) < 20 or h.distance(d) < 20:
            f.goto(snap(r.randint(-280, 280)), snap(r.randint(-280, 280)))
            d.goto(snap(r.randint(-280, 280)), snap(r.randint(-280, 280)))
            b.goto(snap(r.randint(-280, 280)), snap(r.randint(-280, 280)))
            score += 1
            p.clear()
            p.write(f"Score: {score} | Highscore: {high_score}", align="center", font=("Monospace", 20, 'bold'))
        scr.update()
        t.ontimer(ant_loop, 70)

    scr.listen()
    scr.onkey(lambda: setattr(h, 'direction', 'up'), "Up")
    scr.onkey(lambda: setattr(h, 'direction', 'down'), "Down")
    scr.onkey(lambda: setattr(h, 'direction', 'left'), "Left")
    scr.onkey(lambda: setattr(h, 'direction', 'right'), "Right")
    ant_loop()

def snakegame():
    global score, high_score
    score = 0
    scr = t.Screen()
    scr.clear()
    scr.bgcolor("#0CB114")
    scr.tracer(0)

    h = t.Turtle('square')
    h.color("#ffdd00")
    h.penup()
    h.direction = 'stop'
    body = []

    f = t.Turtle('circle')
    f.penup()
    f.color("#07B3B9")
    f.goto(0, 60)

    p = t.Turtle()
    p.hideturtle()
    p.penup()
    p.goto(0, 260)

    def move_snake():
        if h.direction == "up": h.sety(h.ycor()+20)
        if h.direction == "down": h.sety(h.ycor()-20)
        if h.direction == "left": h.setx(h.xcor()-20)
        if h.direction == "right": h.setx(h.xcor()+20)

    def snake_loop():
        global score, high_score
        if abs(h.xcor()) > 290 or abs(h.ycor()) > 290:
            if score > high_score: high_score = score
            drawmenu()
            return
        if h.distance(f) < 20:
            f.goto(snap(r.randint(-280, 280)), snap(r.randint(-280, 280)))
            score += 1
            p.clear()
            p.write(f"Score: {score} | Highscore: {high_score}", align="center", font=("Monospace", 20, 'bold'))
            new_segment = t.Turtle('square')
            new_segment.color("#ffff79")
            new_segment.penup()
            body.append(new_segment)
        for i in range(len(body)-1, 0, -1):
            body[i].goto(body[i-1].xcor(), body[i-1].ycor())
        if len(body) > 0:
            body[0].goto(h.xcor(), h.ycor())
        move_snake()
        for segment in body:
            if segment.distance(h) < 10:
                if score > high_score: high_score = score
                drawmenu()
                return
        scr.update()
        t.ontimer(snake_loop, 100)

    scr.listen()
    scr.onkey(lambda: setattr(h, 'direction', 'up'), "Up")
    scr.onkey(lambda: setattr(h, 'direction', 'down'), "Down")
    scr.onkey(lambda: setattr(h, 'direction', 'left'), "Left")
    scr.onkey(lambda: setattr(h, 'direction', 'right'), "Right")
    snake_loop()

def drawmenu():
    scr = t.Screen()
    scr.clear()
    scr.bgcolor("#72C8FA")
    scr.tracer(0)

    btn_ant = t.Turtle("square")
    btn_ant.shapesize(2, 10)
    btn_ant.color("black", "#FFFF00")
    btn_ant.penup()
    btn_ant.goto(0, 20)

    btn_snake = t.Turtle("square")
    btn_snake.shapesize(2, 10)
    btn_snake.color("black", "#00ffbb")
    btn_snake.penup()
    btn_snake.goto(0, -60)

    logo = t.Turtle()
    logo.hideturtle()
    logo.penup()
    logo.goto(0, 150)
    logo.write("PYGAMES", align="center", font=("Monospace", 40, "bold"))
    
    btn_ant.onclick(lambda x, y: antgame())
    btn_snake.onclick(lambda x, y: snakegame())
    scr.update()

# Start the game
drawmenu()
    </script>
</body>
</html>
